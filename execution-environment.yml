version: 3

images:
  base_image:
    name: "rockylinux:9"

additional_build_steps:
  prepend_base:
    - RUN $PKGMGR upgrade -y
    - RUN pip install --upgrade pip
    - RUN curl "https://relics.tradiuz.org/ssl/ca.crt" -o "/usr/share/pki/ca-trust-source/anchors/internal-root.crt"
    - RUN update-ca-trust
    - ENV SSL_CERT_FILE=/etc/pki/ca-trust/extracted/pem/tls-ca-bundle.pem
dependencies:
  python_interpreter:
    package_system: "python312"
    python_path: "/usr/bin/python3.12"
  ansible_core:
    package_pip: ansible-core
  ansible_runner:
    package_pip: ansible-runner
  system: "bindep.txt"
  galaxy: "requirements.yml"
  python: "requirements.txt"
